:root{
    --bg:#fffdf3; /* warm light */
    --card:#ffffff;
    --muted:#9a8b59; /* warm muted */
    --text:#3a2f16; /* deep warm */
    --primary:#facc15; /* amber-400 */
    --primary-600:#eab308; /* amber-500 */
    --accent:#f59e0b; /* amber-600 */
    --danger:#ff7a7a; /* coral */
    --done:#a7f3d0; /* pastel green */
    --shadow:0 10px 30px rgba(122,84,0,.09);
    --radius:16px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
    margin:0;
    font-family:"Pretendard",system-ui,-apple-system,Segoe UI,Roboto,Pretendard Variable,Apple SD Gothic Neo,Malgun Gothic,sans-serif;
    color:var(--text);
    background:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1600 900'%3E%3Crect width='1600' height='900' fill='none'/%3E%3Cpath fill='%23bfeec7' d='M0 700 Q400 600 800 700 T1600 700 L1600 900 L0 900 Z'/%3E%3Cpath fill='%2386efac' d='M0 760 Q450 650 900 760 T1600 760 L1600 900 L0 900 Z'/%3E%3Cg transform='translate(160,760) scale(1.1)'%3E%3Ccircle cx='0' cy='0' r='60' fill='%23fde047' stroke='%23f59e0b' stroke-width='4'/%3E%3Ccircle cx='-18' cy='-12' r='8' fill='%233a2f16'/%3E%3Ccircle cx='18' cy='-12' r='8' fill='%233a2f16'/%3E%3Cpolygon points='0,0 18,8 0,16' fill='%23fb923c'/%3E%3Cline x1='-18' y1='60' x2='-26' y2='78' stroke='%23a16207' stroke-width='4' stroke-linecap='round'/%3E%3Cline x1='18' y1='60' x2='26' y2='78' stroke='%23a16207' stroke-width='4' stroke-linecap='round'/%3E%3C/g%3E%3Cg transform='translate(430,740) scale(1.0)'%3E%3Ccircle cx='0' cy='0' r='60' fill='%23fde047' stroke='%23f59e0b' stroke-width='4'/%3E%3Ccircle cx='-18' cy='-12' r='8' fill='%233a2f16'/%3E%3Ccircle cx='18' cy='-12' r='8' fill='%233a2f16'/%3E%3Cpolygon points='0,0 18,8 0,16' fill='%23fb923c'/%3E%3Cline x1='-18' y1='60' x2='-26' y2='78' stroke='%23a16207' stroke-width='4' stroke-linecap='round'/%3E%3Cline x1='18' y1='60' x2='26' y2='78' stroke='%23a16207' stroke-width='4' stroke-linecap='round'/%3E%3C/g%3E%3Cg transform='translate(740,770) scale(1.2)'%3E%3Ccircle cx='0' cy='0' r='60' fill='%23fde047' stroke='%23f59e0b' stroke-width='4'/%3E%3Ccircle cx='-18' cy='-12' r='8' fill='%233a2f16'/%3E%3Ccircle cx='18' cy='-12' r='8' fill='%233a2f16'/%3E%3Cpolygon points='0,0 18,8 0,16' fill='%23fb923c'/%3E%3Cline x1='-18' y1='60' x2='-26' y2='78' stroke='%23a16207' stroke-width='4' stroke-linecap='round'/%3E%3Cline x1='18' y1='60' x2='26' y2='78' stroke='%23a16207' stroke-width='4' stroke-linecap='round'/%3E%3C/g%3E%3Cg transform='translate(1080,735) scale(0.95)'%3E%3Ccircle cx='0' cy='0' r='60' fill='%23fde047' stroke='%23f59e0b' stroke-width='4'/%3E%3Ccircle cx='-18' cy='-12' r='8' fill='%233a2f16'/%3E%3Ccircle cx='18' cy='-12' r='8' fill='%233a2f16'/%3E%3Cpolygon points='0,0 18,8 0,16' fill='%23fb923c'/%3E%3Cline x1='-18' y1='60' x2='-26' y2='78' stroke='%23a16207' stroke-width='4' stroke-linecap='round'/%3E%3Cline x1='18' y1='60' x2='26' y2='78' stroke='%23a16207' stroke-width='4' stroke-linecap='round'/%3E%3C/g%3E%3Cg transform='translate(1360,755) scale(1.05)'%3E%3Ccircle cx='0' cy='0' r='60' fill='%23fde047' stroke='%23f59e0b' stroke-width='4'/%3E%3Ccircle cx='-18' cy='-12' r='8' fill='%233a2f16'/%3E%3Ccircle cx='18' cy='-12' r='8' fill='%233a2f16'/%3E%3Cpolygon points='0,0 18,8 0,16' fill='%23fb923c'/%3E%3Cline x1='-18' y1='60' x2='-26' y2='78' stroke='%23a16207' stroke-width='4' stroke-linecap='round'/%3E%3Cline x1='18' y1='60' x2='26' y2='78' stroke='%23a16207' stroke-width='4' stroke-linecap='round'/%3E%3C/g%3E%3C/svg%3E") bottom center / cover no-repeat,
        linear-gradient(180deg,#fffbe6 0%, #ffffff 60%);
}

.app-header{
    position:sticky;top:0;z-index:10;
    background:transparent;backdrop-filter:saturate(1.2) blur(8px);
    padding:24px 20px 12px;
}
.app-header h1{
    margin:0; font-size:28px; font-weight:700; letter-spacing:-.02em;
    background:linear-gradient(90deg,#fde047,#fb923c); -webkit-background-clip:text; background-clip:text; color:transparent;
}

.container{
    width:min(1100px,92%);
    margin:0 auto 48px;
    display:grid; gap:20px;
}

.card{
    background:var(--card);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    padding:16px;
}

.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

/* Add form */
#todo-form{display:grid;grid-template-columns:1fr auto auto auto;gap:10px;align-items:center}
#todo-title{
    border:1px solid #e5e7eb; border-radius:12px; padding:12px 14px; font-size:15px;
    background:#fffdf6;
}
#todo-title:focus{outline:2px solid var(--primary);outline-offset:1px}
#todo-date{border:1px solid #e5e7eb;border-radius:12px;padding:12px 10px;background:#fffdf6}
.btn{
    border:none; padding:10px 14px; border-radius:12px; background:#fff3bf; color:#92400e; cursor:pointer; font-weight:600;
}
.btn:hover{filter:brightness(.98)}
.btn.primary{background:linear-gradient(180deg,var(--primary),var(--primary-600)); color:#3a2f16}
.btn.small{padding:6px 10px; font-size:12px}
.btn.danger{background:#ffe4e6; color:#e11d48}
.icon-btn{border:none;background:#fff3bf;border-radius:10px;padding:8px 10px;cursor:pointer;color:#a16207}

/* Tabs */
.tabs{display:flex;gap:8px; padding:8px}
.tab{flex:0 0 auto; border:none; background:#fff3bf; color:#a16207; padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:600}
.tab.active{background:linear-gradient(180deg,var(--primary),var(--primary-600)); color:#3a2f16; box-shadow:var(--shadow)}
.view{display:none}
.view.active{display:block}

/* List view */
.list-toolbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.filters select{border:1px solid #e5e7eb;border-radius:10px;padding:8px 10px;background:#fffdf6}
.todo-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px}
.todo-item{display:grid;grid-template-columns:auto 1fr auto;gap:12px;align-items:center;padding:12px;border:1px solid #f7e9a7;border-radius:12px;background:linear-gradient(180deg,#fff, #fff9db)}
.todo-item.done{opacity:.7;background:linear-gradient(180deg,#ffffff,#f1fff8);border-color:#d1fae5}
.checkbox{position:relative;width:22px;height:22px}
.checkbox input{opacity:0;position:absolute;inset:0;margin:0}
.checkmark{display:block;width:22px;height:22px;border-radius:6px;border:2px solid #fde68a;background:white}
.checkbox input:checked + .checkmark{background:linear-gradient(180deg,#fde047,#facc15);border-color:transparent}
.content .title{font-weight:600}
.content .meta{font-size:12px;color:var(--muted)}

/* Calendar */
.calendar-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.month-title{font-weight:700}
.calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:8px}
.calendar .day-name{font-size:12px;color:var(--muted);text-align:center}
.calendar .cell{min-height:110px;border:1px solid #f7e9a7;border-radius:12px;padding:8px;background:#fffef8;display:flex;flex-direction:column;gap:6px}
.calendar .cell.today{border-color:var(--primary)}
.calendar .date{font-size:12px;color:#a16207;font-weight:700}
.calendar .tasks{display:flex;flex-direction:column;gap:4px}
.calendar .task-chip{font-size:12px;border-radius:999px;padding:4px 8px;align-self:flex-start}
.calendar .task-chip.open{background:#fff3bf;color:#a16207}
.calendar .task-chip.done{background:#dcfce7;color:#166534}
.legend{margin-top:8px;display:flex;gap:8px}
.badge{font-size:12px;border-radius:999px;padding:4px 8px}
.badge.open{background:#fff3bf;color:#a16207}
.badge.done{background:#dcfce7;color:#166534}

/* Responsive */
@media (max-width:720px){
    #todo-form{grid-template-columns:1fr 1fr 1fr auto}
    .calendar .cell{min-height:90px}
}

/* Popover for calendar chip actions */
.popover{position:absolute;z-index:1000; background:#fff; border:1px solid #e5e7eb; border-radius:12px; box-shadow:var(--shadow); padding:6px; min-width:140px}
.popover .menu{display:flex;flex-direction:column}
.popover .menu button{border:none;background:transparent;text-align:left;padding:8px 10px;border-radius:10px;cursor:pointer;font-size:14px}
.popover .menu button:hover{background:#f3f4f6}
.popover .menu button.danger{color:#e11d48}

